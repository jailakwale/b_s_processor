(self.webpackChunklite=self.webpackChunklite||[]).push([[8694],{73004:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});var l=t(67294);function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}var i=l.createElement("path",{d:"M4 7.33L10.03 14l.5.55.5-.55 5.96-6.6-.98-.9-5.98 6.6h1L4.98 6.45z",fillRule:"evenodd"});const r=function(e){return l.createElement("svg",o({width:21,height:21,viewBox:"0 0 21 21"},e),i)}},84783:(e,n,t)=>{"use strict";t.d(n,{b3:()=>M,Iq:()=>z,Fp:()=>J});var l=t(63038),o=t.n(l),i=t(28655),r=t.n(i),c=t(71439),a=t(46829),u=t(67294),s=t(34664),d=t(36511),m=t(89423),f=t(73891),p=t(324),b=t(62181),v=t(42933),E=t(82318),g=t(55099),w=t(80362),C=t(77601),_=t(37278),S=t(98024),y=t(95760),h=t(51512),k=t(6688),x=t(27108),F=t(67297),I=t(73004),O=t(27952);function R(){var e=r()(["\n  mutation UnsubscribeCollectionEmailsMutation($id: ID!) {\n    unsubscribeCollectionEmails(collectionId: $id) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isSubscribedToEmails\n      }\n    }\n  }\n"]);return R=function(){return e},e}function T(){var e=r()(["\n  mutation SubscribeCollectionEmailsMutation($id: ID!) {\n    subscribeCollectionEmails(collectionId: $id) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isSubscribedToEmails\n      }\n    }\n  }\n"]);return T=function(){return e},e}function V(){var e=r()(["\n  mutation UnfollowCollectionMutation($id: ID!) {\n    unfollowCollection(targetCollectionId: $id) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isFollowing\n      }\n    }\n  }\n"]);return V=function(){return e},e}function P(){var e=r()(["\n  mutation FollowCollectionMutation($id: ID!) {\n    followCollection(targetCollectionId: $id) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isFollowing\n      }\n    }\n  }\n"]);return P=function(){return e},e}function U(){var e=r()(["\n  fragment CollectionFollowButton_collection on Collection {\n    __typename\n    id\n    name\n    canToggleEmail\n    slug\n    ...collectionUrl_collection\n    ...SusiClickable_collection\n  }\n  ","\n  ","\n"]);return U=function(){return e},e}function B(){var e=r()(["\n  fragment CollectionFollowButton_post on Post {\n    __typename\n    id\n  }\n"]);return B=function(){return e},e}var L="collectionFollowPopover",M=(0,c.Ps)(B()),z=(0,c.Ps)(U(),O.nfI,b.Os),A="follow_card",D=function(e){var n=e.children,t=e.extraTopPadding,l=e.extraBottomPadding,o=e.padding,i=e.margin,r=e.borderTop;return u.createElement(v.x,{padding:o||"".concat(t?"20px":"5px"," 20px ").concat(l?"20px":"5px"," 20px"),margin:i,borderTop:r?"BASE_LIGHTER":"NONE"},n)},N=(0,c.Ps)(P()),$=(0,c.Ps)(V()),G=(0,c.Ps)(T()),Y=(0,c.Ps)(R()),j=function(e){return function(n){return e?{fill:n.baseColor.text.lighter,marginLeft:"2px",width:"18px",height:"auto",position:"absolute",bottom:"0"}:{fill:"inherit",marginLeft:"6px"}}},J=function(e){var n=e.buttonSize,t=e.buttonStyleFn,l=e.collection,i=e.isPopoverVisible,r=e.isToastVisible,c=e.post,O=e.simpleButton,R=e.simpleLink,T=e.isLinkStyle,V=e.susiEntry,P=(0,k.I)(),U=(0,F.v9)((function(e){return e.config.authDomain})),B=(0,F.p9)((function(e){return e.config.isAmp})),M=(0,d.r)().viewerId,z=l&&l.name?l.name:"",A=(0,y.Av)(),J=(0,h.pK)(),Z=(0,f.gY)(l).viewerEdge,q=u.useState(!!i),H=o()(q,2),Q=H[0],W=H[1],ee=u.useState(!!r),ne=o()(ee,2),te=ne[0],le=ne[1],oe=function(e,n){var t=(0,a.useMutation)(N),l=o()(t,1)[0];return u.useCallback((function(){return l({variables:{id:e},optimisticResponse:{followCollection:{__typename:"Collection",id:e,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e,"-viewerId:").concat(n),isFollowing:!0}}}})}),[e])}(l.id,M),ie=function(e,n){var t=(0,a.useMutation)($),l=o()(t,1)[0];return u.useCallback((function(){return l({variables:{id:e},optimisticResponse:{unfollowCollection:{__typename:"Collection",id:e,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e,"-viewerId:").concat(n),isFollowing:!1}}}})}),[e])}(l.id,M),re=function(e,n){var t=(0,a.useMutation)(G),l=o()(t,1)[0];return u.useCallback((function(){return l({variables:{id:e},optimisticResponse:{subscribeCollectionEmails:{__typename:"Collection",id:e,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e,"-viewerId:").concat(n),isSubscribedToEmails:!0}}}})}),[e])}(l.id,M),ce=function(e,n){var t=(0,a.useMutation)(Y),l=o()(t,1)[0];return u.useCallback((function(){return l({variables:{id:e},optimisticResponse:{unsubscribeCollectionEmails:{__typename:"Collection",id:e,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e,"-viewerId:").concat(n),isSubscribedToEmails:!1}}}})}),[e])}(l.id,M),ae=u.useCallback((function(){W(!1)}),[]);u.useEffect((function(){return x.V6.on("scroll",ae),function(){x.V6.off("scroll",ae)}}),[ae]);var ue=u.useCallback((function(){null!=Z&&Z.isFollowing||(A.event("collection.followed",{collectionId:l.id,followSource:J}),oe()),W(!0)}),[l,Z]),se=u.useCallback((function(){A.event("collection.unfollowed",{collectionId:l.id,followSource:J}),ie(),W(!1)}),[]),de=u.useCallback((function(){W(!1)}),[]),me=u.useCallback((function(e){A.event("client.action",{action:"toggle-subscribe-collection-emails",eventType:"click",classAttribute:"checkbox"}),e.target.checked?re():ce(),le(!0)}),[]),fe=u.useCallback((function(){le(!1)}),[]);if(B)return null;if(O)return X(U,l,c,ue,se,n,t,Z);var pe=function(e){var n=e.children,t=e.buttonSize,o=void 0===t?"SMALL":t,i=e.buttonStyle,r=e.isPopoverVisible,a=e.linkStyle,s=void 0===a?null:a;return u.createElement(m.I,null,(function(e){return e?null!=s?u.createElement(E.r,{ariaControls:L,ariaExpanded:r?"true":"false",onClick:ue,linkStyle:s},n):u.createElement(g.z,{ariaControls:L,ariaExpanded:r?"true":"false",size:o,onClick:ue,buttonStyle:i},n):u.createElement(b.R9,{collection:l,buttonStyle:"STRONG",linkStyle:"OBVIOUS",isButton:!T,buttonSize:o,operation:"register",actionUrl:K(U,l,c)||"",susiEntry:V},n)}))},be=!(null==Z||!Z.isSubscribedToEmails),ve=!(null==Z||!Z.isFollowing);return R?u.createElement(E.r,{onClick:ve?se:ue},u.createElement(v.x,{display:"flex",flexDirection:"row"},ve?"Unfollow publication":"Follow publication")):u.createElement(s.f,null,u.createElement(w.J,{ariaId:L,isVisible:!!Q,hide:de,popoverRenderFn:function(){return u.createElement(v.x,{width:"280px",display:"flex",flexDirection:"column"},u.createElement(D,{extraTopPadding:!0},u.createElement(_.X6,{scale:"XS"},"You‘re following ",z)),u.createElement(D,null,u.createElement(S.F,{scale:"M"},"You‘ll now see more stories from ",z," across Medium.")),l.canToggleEmail&&u.createElement(D,null,u.createElement(S.F,{scale:"M"},u.createElement("label",null,u.createElement(v.x,{display:"inline",marginRight:"5px"},u.createElement("input",{type:"checkbox",onChange:me,checked:be})),"Receive emails from this publication"))),u.createElement(D,{extraBottomPadding:!0},u.createElement(S.F,{scale:"M"},u.createElement(E.r,{onClick:se,linkStyle:"OBVIOUS",inline:!0},"Unfollow publication"))))}},u.createElement(pe,{isPopoverVisible:!!Q,buttonStyle:ve?"OBVIOUS":"STRONG",linkStyle:T?null!=Z&&Z.isFollowing?"SUBTLE":"OBVIOUS":null,buttonSize:n},u.createElement(v.x,{display:"flex",flexDirection:"row"},ve?"Following":"Follow",ve&&u.createElement("span",{className:P({marginBottom:T?null:"-6px",position:"relative"})},u.createElement(I.Z,{className:P(j(T))}))))),u.createElement(p.N8,null,u.createElement(C.F,{isVisible:!!te,hide:fe,duration:2e3},u.createElement(S.F,{scale:"M"},be?"You‘ll now receive emails from ".concat(z,"."):"You‘ll no longer receive emails from ".concat(z,".")))))},K=function(e,n,t){return n.slug&&(t&&t.id?(0,O.TAb)(e,n.slug,t.id):(0,O.LlO)(e,n.slug))},X=function(e,n,t,l,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"REGULAR",r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(e){return e?"STRONG":"OBVIOUS"},c=arguments.length>7?arguments[7]:void 0,a=!(null==c||!c.isFollowing),s=r(!!a);return u.createElement(m.I,null,(function(r){return r?u.createElement(g.z,{size:i,onClick:a?o:l,buttonStyle:s},a?"Following":"Follow"):u.createElement(b.R9,{collection:n,buttonStyle:"OBVIOUS",isButton:!0,buttonSize:"REGULAR",operation:"register",actionUrl:K(e,n,t)||"",susiEntry:A},a?"Following":"Follow")}))}},15886:(e,n,t)=>{"use strict";t.d(n,{ds:()=>f,Jh:()=>p,jS:()=>b});var l=t(28655),o=t.n(l),i=t(71439),r=t(67294),c=t(82318),a=t(98024),u=t(61250),s=t(27390),d=t(27952);function m(){var e=o()(["\n  fragment PublisherFollowerCount_publisher on Publisher {\n    __typename\n    id\n    ... on Collection {\n      slug\n      subscriberCount\n    }\n    ... on User {\n      socialStats {\n        followerCount\n      }\n      username\n    }\n  }\n"]);return m=function(){return e},e}var f=function(e){var n,t,l=null!==(n="Collection"===e.__typename?e.subscriberCount:null===(t=e.socialStats)||void 0===t?void 0:t.followerCount)&&void 0!==n?n:0;return{followerCount:l,isFollowerCountVisible:l>0}},p=function(e){var n,t,l=e.publisher,o=e.disableLink,i=void 0!==o&&o,m=e.linkStyle,p=void 0===m?"SUBTLE":m,b=e.scale,v=void 0===b?"L":b,E=f(l),g=E.followerCount,w=E.isFollowerCountVisible,C=(0,u.di)("ShowLiteCollectionFollowers",{collectionSlug:"Collection"===l.__typename&&null!==(n=l.slug)&&void 0!==n?n:""}),_="User"===l.__typename?(0,d.olC)(null!==(t=l.username)&&void 0!==t?t:""):C,S=!i;if(!w)return null;var y="".concat((0,s.pY)(g)," Follower").concat(1===g?"":"s");return S?r.createElement(c.r,{href:_,linkStyle:p},y):r.createElement(a.F,{tag:"span",scale:v,color:"DARKER"},y)},b=(0,i.Ps)(m())}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/8694.f0b41de1.chunk.js.map